{% extends "base.html" %}

{% block title %}{{ page.title }} | Agents | {{ config.title }}{% endblock %}

{% block content %}
<article class="article">
    <div class="container container-narrow">
        <header class="article-header">
            <nav class="breadcrumb">
                <a href="/agents/">Agents</a>
                <span>/</span>
                <span>{{ page.title }}</span>
            </nav>
            <div class="agent-header-detail">
                <h1>{{ page.title }}</h1>
                <div class="agent-badges">
                    {% if page.extra.official %}
                    <span class="agent-badge-official">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>
                        Official
                    </span>
                    {% endif %}
                    {% if page.extra.status %}
                    <span class="agent-status {{ page.extra.status | lower }}">{{ page.extra.status }}</span>
                    {% endif %}
                </div>
            </div>
            {% if page.description %}
            <p class="article-description">{{ page.description }}</p>
            {% endif %}

            {# Agent Meta Information #}
            <div class="agent-meta">
                {% if page.extra.version %}
                <span class="meta-item">
                    <strong>Version:</strong> {{ page.extra.version }}
                </span>
                {% endif %}
                {% if page.extra.author %}
                <span class="meta-item">
                    <strong>Author:</strong>
                    {% if page.extra.author_url %}
                    <a href="{{ page.extra.author_url }}" target="_blank" rel="noopener">{{ page.extra.author }}</a>
                    {% else %}
                    {{ page.extra.author }}
                    {% endif %}
                </span>
                {% endif %}
                {% if page.extra.license %}
                <span class="meta-item">
                    <strong>License:</strong> {{ page.extra.license }}
                </span>
                {% endif %}
                {% if page.extra.protocol_version %}
                <span class="meta-item">
                    <strong>Protocol:</strong> v{{ page.extra.protocol_version }}
                </span>
                {% endif %}
                {% if page.extra.repo %}
                <span class="meta-item">
                    <a href="{{ page.extra.repo }}" target="_blank" rel="noopener">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
                        View Source
                    </a>
                </span>
                {% endif %}
            </div>

            {# Quick Install Section #}
            {% if page.extra.crate_name or page.extra.docker_image %}
            <div class="agent-install-quick">
                <h3>Quick Install</h3>
                <div class="install-methods">
                    {% if page.extra.crate_name %}
                    <div class="install-method">
                        <span class="install-label">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                            Cargo
                        </span>
                        <div class="install-cmd-wrapper">
                            <code class="install-cmd">cargo install {{ page.extra.crate_name }}</code>
                            <button class="copy-btn" onclick="navigator.clipboard.writeText('cargo install {{ page.extra.crate_name }}')" title="Copy to clipboard">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                            </button>
                        </div>
                    </div>
                    {% endif %}
                    {% if page.extra.docker_image %}
                    <div class="install-method">
                        <span class="install-label">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12.5c0-1-.5-2-1.5-2.5-.5-3-3-5-6-5-2.5 0-4.5 1.5-5.5 3.5C7.5 8 6 8 5 9c-1.5 1-2 3-1.5 4.5"/><path d="M2 17h20v5H2z"/><path d="M6 17v5"/><path d="M10 17v5"/><path d="M14 17v5"/><path d="M18 17v5"/></svg>
                            Docker
                        </span>
                        <div class="install-cmd-wrapper">
                            <code class="install-cmd">docker pull {{ page.extra.docker_image }}</code>
                            <button class="copy-btn" onclick="navigator.clipboard.writeText('docker pull {{ page.extra.docker_image }}')" title="Copy to clipboard">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                            </button>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </header>

        <div class="article-content prose">
            {{ page.content | safe }}
        </div>

        {% if page.taxonomies.tags %}
        <footer class="article-footer">
            <div class="agent-tags">
                {% for tag in page.taxonomies.tags %}
                <a href="/tags/{{ tag | slugify }}/" class="agent-tag">{{ tag }}</a>
                {% endfor %}
            </div>

            {# Contribution CTA #}
            <div class="agent-contribute">
                <p>
                    Found an issue or want to improve this agent?
                    {% if page.extra.repo %}
                    <a href="{{ page.extra.repo }}/issues" target="_blank" rel="noopener">Open an issue</a> or
                    <a href="{{ page.extra.repo }}/pulls" target="_blank" rel="noopener">submit a PR</a>.
                    {% else %}
                    <a href="https://github.com/raskell-io/sentinel.raskell.io/issues" target="_blank" rel="noopener">Let us know</a>.
                    {% endif %}
                </p>
            </div>
        </footer>
        {% endif %}
    </div>
</article>
{% endblock %}
